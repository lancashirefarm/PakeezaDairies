<?xml version="1.0"?>
<odoo>
        <record model="ir.ui.view" id="dev_account_invoice_view">
            <field name="name">dev.account.invoice.view</field>
            <field name="model">dev.account.invoice</field>
            <field name="arch" type="xml">

                <form string="Batch Invoice">
                        <header>
						    <button name="action_confirm" type="object"  string="Confirm" states="draft" class="oe_highlight"  />
						    <button name="action_invoice" type="object"  string="Create Invoiced" states="confirm" class="oe_highlight" />
						    <button name="action_view_invoice" type="object"  string="View Invoiced" states="invoice" class="oe_highlight" />
						    <field name="state" widget="statusbar" />
					    </header>
                    <sheet>
                                            <h2>
                                                <field name="name"  />
                                        </h2>
                        <group>

                            <group>
						        <field name="invoice_type" attrs="{'readonly':[('state','!=','draft')]}" />
					        </group>
                            <group>
						         <field name="journal_id" attrs="{'readonly':[('state','!=','draft')]}" />
						         <field name="company_id" attrs="{'readonly':[('state','!=','draft')]}" />
					         </group>
					          <notebook colspan="4">
                                    <page string="Invoice Lines">
                                        <group >

                                            <field name="invoice_ids" attrs="{'invisible':[('invoice_type','!=','cust_invoice')],'readonly':[('state','!=','draft')] }" nolabel="1" >
						                         <tree editable="bottom" >
						                                <field name="date"  />
                                                         <field name="partner_id" domain="[('customer','=',True)]"  />
                                                         <field name="description" />
<!--                                                         <field name="account_id" domain="[('company_id', '=', parent.company_id), ('journal_id', '=', parent.journal_id), ('type', '=', 'other')]"  />-->
                                                         <!-- <field name="account_id" domain="[('company_id', '=', parent.company_id), ('user_type_id', '=', 'other')]"  /> -->
                                                         <field name="account_id" domain="[('company_id', '=', parent.company_id)]"  />
                                                         <field name="uom_id" />
                                                         <field name="amount" />

                                                  </tree>
                                            </field>
                                        </group>

                                    <field name="sup_invoice_ids" attrs="{'invisible':[('invoice_type','!=','sup_invoice')], 'readonly':[('state','!=','draft')] }"  >
						             <tree editable="bottom" >
						                    <field name="date"  />
                                             <field name="partner_id" domain="[('supplier','=',True)]"  />
                                             <field name="description" />
                                            <!-- <field name="account_id" domain="[('company_id', '=', parent.company_id), ('user_type_id', '=', 'other')]"  /> -->
                                             <field name="account_id" domain="[('company_id', '=', parent.company_id)]"  />
                                             <field name="supp_invoice_no" />
                                             <field name="uom_id" />
                                             <field name="amount" />

                                      </tree>
                                    </field>

                                    </page>
                              </notebook>
				         </group>



                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="dev_account_invoice_tree">
            <field name="name">dev.account.invoice.tree</field>
            <field name="model">dev.account.invoice</field>
            <field name="arch" type="xml">

                <tree colors="green:state == 'invoice'" string="Batch Invoice">
<!--                <tree string="Account Invoice">-->
                        <field name="invoice_type"/>
                        <field name="company_id"/>
                        <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dev_account_invoice_search">
            <field name="name">dev.account.invoice.search</field>
            <field name="model">dev.account.invoice</field>
            <field name="arch" type="xml">
                <search string="Asset Search">
						<filter name="draft" string="Draft" domain="[('state','=','draft')]" help="Draft Invoices"/>
						<filter name="confirm" string="Confirm" domain="[('state','=','confirm')]" help="Confirm Invoices"/>
						<filter name="invoice" string="Invoices" domain="[('state','=','invoice')]" help="Invoices"/>


						<group expand="0" string="Group By">
		                    <filter string="Journal" name="Journal" domain="[]" context="{'group_by':'journal_id'}"/>
		                     <filter string="State" name="State" domain="[]" context="{'group_by':'state'}"/>
                    	</group>
                </search>
            </field>
        </record>


        <record id="action_dev_account_invoice" model="ir.actions.act_window">
		    <field name="name">Batch Invoice</field>
		    <field name="type">ir.actions.act_window</field>
		    <field name="res_model">dev.account.invoice</field>
		    <field name="view_type">form</field>
		    <field name="view_mode">tree,form</field>
	    </record>


         <menuitem name="Batch Invoice" id="menu_account_type" parent="account.menu_finance_receivables" action="action_dev_account_invoice"/>



</odoo>
